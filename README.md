# FIAP - Faculdade de Inform√°tica e Administra√ß√£o Paulista

<p align="center">
<a href= "https://www.fiap.com.br/"><img src="assets/logo-fiap.png" alt="FIAP - Faculdade de Inform√°tica e Admnistra√ß√£o Paulista" border="0" width=40% height=40%></a>
</p>

<br>


# Projeto: fiap_gs1

## Atividade em Grupo: FIAP - 1TIAOB - 2025/1 - Fase4 GS1

## üë®‚Äçüéì Integrantes: 
- <a href="">Alice C. M. Assis - RM 566233</a>
- <a href="">Leonardo S. Souza - RM 563928</a>
- <a href="">Lucas B. Francelino - RM 561409</a> 
- <a href="">Pedro L. T. Silva - RM 561644</a> 
- <a href="">Vitor A. Bezerra - RM 563001</a>

## üë©‚Äçüè´ Professores:
### Tutor(a) 
- <a href="proflucas.moreira@fiap.com.br">Lucas Gomes Moreira</a>
### Coordenador(a)
- <a href="profandre.chiovato@fiap.com.br">Andr√© Godoi Chiovato</a>


## üìú Descri√ß√£o

# Projeto: Agente de IA para Comunica√ß√£o Emergencial em Desastres

## Introdu√ß√£o

Nos √∫ltimos anos, eventos naturais extremos ‚Äî como enchentes, deslizamentos, queimadas e ondas de calor ‚Äî t√™m ocorrido com maior frequ√™ncia e intensidade. Em meio ao caos, a **comunica√ß√£o emergencial** se revela um dos elementos mais fr√°geis e, ao mesmo tempo, mais decisivos na preserva√ß√£o de vidas.

√ìrg√£os como a Defesa Civil e o Corpo de Bombeiros enfrentam limita√ß√µes log√≠sticas, escassez de recursos e falta de pessoal. Em muitas situa√ß√µes, **uma mensagem clara e bem distribu√≠da pode evitar trag√©dias maiores**, permitindo evacua√ß√µes preventivas e coordenadas antes que a situa√ß√£o se agrave.

Tendo em visto isto, o grupo ponderou que antes de desenvolver solu√ß√µes complexas de resgate e conten√ß√£o, √© essencial **melhorar a comunica√ß√£o** com a popula√ß√£o em risco. A ideia √© criar um agente de intelig√™ncia artificial que possa gerar automaticamente conte√∫dos informativos e alertas, otimizando o tempo e os recursos das equipes de emerg√™ncia.

## Problema

O maior problema encontrado pelo grupo √© desenvolver uma comunica√ß√£o eficiente e certeira, capaz de competir com a velocidade das redes sociais e a prolifera√ß√£o de informa√ß√µes falsas. Al√©m disso, se a informa√ß√£o n√£o for entregue de maneira atrativa, muito poss√≠velmente a popula√ß√£o nem mesmo ler√° a comunica√ß√£o oficial.

Em situa√ß√µes de crise, a popula√ß√£o precisa de **orienta√ß√µes claras e imediatas** sobre como agir, onde se abrigar e quais medidas tomar para garantir sua seguran√ßa.

Posto isso, √© importante que essa comunica√ß√£o seja **visualmente impactante**, utilizando imagens que transmitam a urg√™ncia da situa√ß√£o e as instru√ß√µes necess√°rias de forma r√°pida e compreens√≠vel, uma vez que muitas pessoas podem n√£o ter acesso a informa√ß√µes escritas ou podem ter dificuldades de leitura sob estresse.

## MVP da Solu√ß√£o Proposta

Desenvolvemos um **Agente de Intelig√™ncia Artificial** voltado √† **cria√ß√£o autom√°tica de posts e imagens informativas** para uso imediato em canais de comunica√ß√£o da Defesa Civil e Bombeiros.

Essa solu√ß√£o atua como um suporte operacional, gerando conte√∫dos em tempo real com base em dados reais sobre desastres. Seu objetivo √© **aumentar a velocidade e a efic√°cia na divulga√ß√£o de alertas e instru√ß√µes** √† popula√ß√£o em risco.

## Poss√≠veis Upgrades para o Futuro

- **Gera√ß√£o de audio e video**: Expans√£o do agente para criar conte√∫dos multim√≠dia, como v√≠deos curtos e mensagens de voz, que podem ser mais eficazes em alcan√ßar p√∫blicos diversos, muito embora o grupo tenha utilizado o a IA VEO3 para fazer videos da aparesenta√ß√£o, devido a limita√ß√µes or√ßament√°rias, a solu√ß√£o inicial se concentra em posts est√°ticos e imagens.
- **Integra√ß√£o com sistemas de alerta**: Conectar o agente a plataformas de alerta em massa, como sirenes e aplicativos de mensagens, para garantir que as informa√ß√µes cheguem rapidamente a todos os cidad√£os.
- **An√°lise de dados hist√≥ricos**: Ampliar a capacidade do agente de analisar dados hist√≥ricos de desastres para prever padr√µes e melhorar a efic√°cia das comunica√ß√µes futuras.
- **Expans√£o para outras √°reas**: Adaptar o agente para atuar em outras situa√ß√µes de emerg√™ncia, como pandemias, crises de sa√∫de p√∫blica ou desastres tecnol√≥gicos, ampliando seu escopo de atua√ß√£o.
- **Localiza√ß√£o e personaliza√ß√£o**: Permitir que o agente gere conte√∫dos personalizados com base na localiza√ß√£o geogr√°fica do usu√°rio, adaptando as mensagens √†s especificidades de cada regi√£o afetada.

## Tecnologias Utilizadas

- **Machine Learning em Python**: An√°lise de dados ambientais e gera√ß√£o contextual de mensagens de alerta.
- **ESP32 com sensor ambiental**: Coleta de dados locais (ex.: n√≠vel de √°gua) para criar posts com base em dados em tempo real.

ATUALIZAR AQUI
- **Base de dados reais**: Utiliza√ß√£o de informa√ß√µes da plataforma [disasterscharter.org](https://disasterscharter.org), que re√∫ne imagens de sat√©lite e relat√≥rios de desastres globais.
- **Banco de Dados**: Armazenamento e organiza√ß√£o de mensagens geradas, registros de risco e hist√≥ricos.
- **Streamlit**: Desenvolvimento de um dashboard interativo para visualiza√ß√£o e gest√£o dos dados, permitindo que as equipes de emerg√™ncia acessem rapidamente as informa√ß√µes geradas pelo agente.
- **API de previs√£o do tempo**: Integra√ß√£o com servi√ßos meteorol√≥gicos para fornecer dados atualizados sobre condi√ß√µes clim√°ticas, essenciais para a gera√ß√£o de alertas precisos.
- **Wokwi**: Simula√ß√£o do ESP32 para monitoramento de condi√ß√µes ambientais, permitindo a cria√ß√£o de posts informativos baseados em dados reais.

## Resultados Esperados

- Aumento significativo da **agilidade e efic√°cia da comunica√ß√£o** de riscos e procedimentos de seguran√ßa;
- **Evacua√ß√£o mais r√°pida** e coordenada de comunidades amea√ßadas;
- Redu√ß√£o da necessidade de a√ß√µes log√≠sticas de alto custo;
- Suporte pr√°tico √†s opera√ß√µes de campo com **alertas visualmente otimizados** e f√°ceis de replicar;
- Ferramenta expans√≠vel para campanhas preventivas e treinamentos.

## Sobre o projeto

O projeto foi desenvolvido visando a usabilidade f√°cil e intuitiva, permitindo que equipes de emerg√™ncia possam gerar e compartilhar informa√ß√µes rapidamente, mesmo sob press√£o. A interface do dashboard foi projetada para ser simples e direta, com foco na visualiza√ß√£o clara dos dados e na gera√ß√£o r√°pida de posts informativos.

### 1Ô∏è‚É£ Circuito de sensores
fazer readme do circuito de sensores

### 2Ô∏è‚É£ Armazenamento de Dados em Banco SQL com Python

O armazenamento dos dados coletados pelos sensores foi implementado em Python, utilizando um banco de dados SQL. O c√≥digo √© respons√°vel por criar tabelas, inserir dados e realizar opera√ß√µes CRUD (Criar, Ler, Atualizar e Deletar) no banco de dados.

### MER

<p align="center">
  <img src="assets/mer.png" alt="MER" border="0" width=70% height=70%>
</p>


Tabela: TIPO_SENSOR
  - id (INTEGER NOT NULL) [PK]
  - nome (VARCHAR(255) NOT NULL)
  - tipo (VARCHAR(15) NOT NULL)

Tabela: SENSOR
  - id (INTEGER NOT NULL) [PK]
  - tipo_sensor_id (INTEGER NOT NULL) [FK -> TIPO_SENSOR]
  - nome (VARCHAR(255) NOT NULL)
  - descricao (VARCHAR(255))
  - data_instalacao (DATETIME)
  - latitude (FLOAT)
  - longitude (FLOAT)

Tabela: LEITURA_SENSOR
  - id (INTEGER NOT NULL) [PK]
  - sensor_id (INTEGER NOT NULL) [FK -> SENSOR]
  - data_leitura (DATETIME NOT NULL)
  - valor (FLOAT NOT NULL)

Tabela: ARQUIVO
  - id (INTEGER NOT NULL) [PK]
  - nome (VARCHAR(255) NOT NULL)
  - tipo (VARCHAR(15) NOT NULL)
  - ultima_atualizacao (DATETIME)
  - bytes_arquivo (BLOB NOT NULL)

Tabela: POST_REDE_SOCIAL
  - id (INTEGER NOT NULL) [PK]
  - conteudo (TEXT NOT NULL)
  - ultima_atualizacao (DATETIME)
  - anexo_id (INTEGER) [FK -> ARQUIVO]

---

### üóÉÔ∏è Justificativa da Escolha da Estrutura de Dados

A escolha de um banco de dados relacional foi motivada pelos seguintes fatores:

- **Integridade e Consist√™ncia:**  
  O modelo relacional garante que os dados estejam sempre √≠ntegros e consistentes, especialmente importantes em cen√°rios cr√≠ticos como emerg√™ncias.

- **Relacionamento entre Dados:**  
  A estrutura em tabelas com chaves prim√°rias e estrangeiras permite mapear claramente as rela√ß√µes entre sensores, tipos, leituras, arquivos e posts. Isso facilita consultas complexas e cruzamento de informa√ß√µes.

- **Normaliza√ß√£o e Redu√ß√£o de Redund√¢ncia:**  
  O uso de tabelas normalizadas evita duplicidade de informa√ß√µes, tornando o armazenamento mais eficiente e a manuten√ß√£o dos dados mais simples.

- **Consultas Eficientes e Flex√≠veis:**  
  O SQL possibilita consultas r√°pidas e personalizadas, essenciais para an√°lises hist√≥ricas, gera√ß√£o de relat√≥rios e tomada de decis√£o em tempo real.

- **Escalabilidade e Facilidade de Manuten√ß√£o:**  
  O modelo relacional √© facilmente expans√≠vel, permitindo adicionar novos tipos de sensores, arquivos ou funcionalidades sem comprometer a estrutura existente.

- **Compatibilidade com o Ecossistema Python:**  
  A integra√ß√£o com bibliotecas Python amplamente utilizadas (como SQLAlchemy, Pandas, etc.) facilita o desenvolvimento, an√°lise e visualiza√ß√£o dos dados.

- **Integra√ß√£o com Ferramentas de Visualiza√ß√£o:**  
  A estrutura relacional favorece a conex√£o com dashboards e ferramentas de BI, potencializando o uso dos dados coletados.

### EXECUTAR O SISTEMA E REALIZAR OPERA√á√ïES CRUD

O sistema foi desenvolvido em Python e utiliza um banco de dados Oracle para armazenar os dados. O c√≥digo √© modularizado, permitindo f√°cil manuten√ß√£o e expans√£o.

## üì¶ Requisitos
- Python 3.13.2
- Bibliotecas:
  - oracledb==3.1.0
  - pandas==2.2.3
  - matplotlib==3.10.1
  - streamlit==1.44.1
  - SQLAlchemy==2.0.40
  - google-genai==1.17.0
  - dotenv==0.9.9
  - pillow==11.2.1
  - fastapi==0.115.12
  - pydantic==2.11.5
  - uvicorn==0.34.3

## üìÇ Instala√ß√£o

- Para instalar as depend√™ncias, utilize o seguinte comando:
    ```bash
    pip install -r requirements.txt
    ```
  
- Para executar o c√≥digo, utilize o seguinte comando:
    ```bash
    streamlit run main_dash.py
    ```

## Arquivo de Configura√ß√£o

O projeto utiliza um arquivo especial chamado **`.env`** para armazenar vari√°veis de ambiente sens√≠veis, como credenciais de banco de dados e chaves de APIs externas. Esse arquivo **n√£o deve ser compartilhado publicamente** por quest√µes de seguran√ßa.

### üìÑ O que √© o `.env`?

O `.env` √© um arquivo-texto simples, onde cada linha define uma vari√°vel de ambiente no formato `NOME_VARIAVEL=valor`. Ele permite separar informa√ß√µes confidenciais do c√≥digo-fonte, facilitando a configura√ß√£o do sistema em diferentes ambientes (desenvolvimento, produ√ß√£o, etc).

### üîë Vari√°veis Utilizadas

| Vari√°vel      | Descri√ß√£o                                                        | Exemplo de Valor                  |
|---------------|------------------------------------------------------------------|-----------------------------------|
| GEMINI_API    | Chave da API do Google GenAI (Gemini)                            | `AIza...`                         |
| API_MET       | Chave da API do OpenWeather                                      | `b1c2...`                         |
| SQL_LITE      | Define o banco de dados a ser usado (`true` ou `false`)          | `true` ou `false`                 |
| LOGGING_ENABLED      | Define se o logger da aplica√ß√£o ser√° ativado (`true` ou `false`) | `true` ou `false`                 |

### üõ°Ô∏è Seguran√ßa

- **Nunca compartilhe seu `.env` publicamente.**
- As chaves de API deste projeto foram enviadas apenas ao orientador via Teams.
- Caso precise rodar o projeto, obtenha suas pr√≥prias chaves conforme instru√ß√µes abaixo.

### üöÄ Como obter suas chaves de API

- **GEMINI_API:**  
  Crie uma conta no [Google AI Studio](https://aistudio.google.com/app/apikey) e gere sua chave para o Google GenAI.
- **API_MET:**  
  Cadastre-se no [OpenWeather](https://openweathermap.org) e gere sua chave de API.

### ‚öôÔ∏è Exemplo de arquivo `.env`

```plaintext
GEMINI_API=sua_chave_gemini_aqui
API_MET=sua_chave_openweather_aqui
SQL_LITE=true
LOGGING_ENABLED=true
```

- Se `SQL_LITE=true`, o sistema usar√° o banco SQLite local.
- Se `SQL_LITE=false`, ser√° utilizado o banco Oracle da FIAP (o sistema apresentar√° uma tela de login para colocar o usu√°rio e senha do banco de dados).

> üí° **ATEN√á√ÉO:**  
> Para o sistema funcionar corretamente √© necess√°rio criar o arquivo `.env` na raiz do projeto, e fornecer as chaves das apis supracitadas.

## üìÅ Estrutura de pastas

Dentre os arquivos e pastas presentes na raiz do projeto, definem-se:

- <b>.streamlit</b>: Pasta que cont√©m arquivos de configura√ß√£o do Streamlit, como o tema e a barra lateral.
- <b>assets</b>: Aqui est√£o os arquivos relacionados a elementos n√£o-estruturados deste reposit√≥rio, como imagens.
- <b>src</b>: Todo o c√≥digo fonte criado para o desenvolvimento do projeto ao longo de todas as fases.
  - <b>dashboard</b>: C√≥digo do dashboard desenvolvido em Python, utilizando a biblioteca Streamlit. ([dashboard](src/dashboard/))
  - <b>database</b>: Execu√ß√£o dos comandos de banco de dados, como Conectar, Cadastrar, Listar, Editar e Excluir.
  - <b>logger</b>: C√≥digo respons√°vel por registrar as opera√ß√µes realizadas no banco de dados, como inser√ß√µes, atualiza√ß√µes e exclus√µes.
  - <b>service</b>: Conex√£o com a api p√∫blica de previs√£o do tempo, respons√°vel por coletar dados meteorol√≥gicos.
  - <b>wokwi</b>: C√≥digo do ESP32, respons√°vel por monitorar a necessidade de irriga√ß√£o em uma planta√ß√£o, simulando sensores de nutrientes e condi√ß√µes ambientais.
- <b>README</b>: arquivo que serve como guia e explica√ß√£o geral sobre o projeto (o mesmo que voc√™ est√° lendo agora).
- <b>main_dash</b>: arquivo principal do dashboard, onde o c√≥digo √© executado. Ele foi colocado nesta localiza√ß√£o para evitar problemas com imports

## üóÉ Hist√≥rico de lan√ßamentos

* 0.2.0 - 04/06/2025  - Vers√£o preliminar da nossa aplica√ß√£o, com dashboard e funcionalidades b√°sicas implementadas
* 0.1.0 - 23/05/2025  - Vers√£o preliminar da nossa aplica√ß√£o

## üìã Licen√ßa

<img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1"><p xmlns:cc="http://creativecommons.org/ns#" xmlns:dct="http://purl.org/dc/terms/"><a property="dct:title" rel="cc:attributionURL" href="https://github.com/agodoi/template">MODELO GIT FIAP</a> por <a rel="cc:attributionURL dct:creator" property="cc:attributionName" href="https://fiap.com.br">Fiap</a> est√° licenciado sobre <a href="http://creativecommons.org/licenses/by/4.0/?ref=chooser-v1" target="_blank" rel="license noopener noreferrer" style="display:inline-block;">Attribution 4.0 International</a>.</p>